<!doctype html>
<html>
<head>
    <title>IRCHelp.org &mdash; Untitled Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description" content="Comprehensive information on everything Internet Relay Chat" />
    <meta name="author" content="irchelpers" />
    <meta name="generator" content="PieCrust 1.3.0-dev" />
    <meta name="template-engine" content="Twig" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
      initial-scale=1.0">
    <!-- Le styles -->
    <link href="/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144"
      href="/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
      href="/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72"
      href="/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed"
      href="/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="/ico/favicon.png">
</head>
<body>
    <!--Start of navigation-->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"> <a class="btn btn-navbar"
            data-toggle="collapse" data-target=".nav-collapse"> <span
              class="icon-bar"></span> <span class="icon-bar"></span> <span
              class="icon-bar"></span> </a> <a class="brand" href="/">#irchelp</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="/">Home</a></li>
              <li><a href="/irchelp/credit.html">About</a></li>
              <li class="dropdown"> <a href="/irchelp/clients" class="dropdown-toggle"
                  data-toggle="dropdown">Clients </a>
                <ul class="dropdown-menu">
                  <li><a href="/irchelp/clients">All Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Windows</li>
                  <li><a href="/irchelp/clients/windows/mirc">mIRC</a></li>
                  <li><a href="/irchelp/clients/windows/xchat">XChat</a></li>
                  <li><a href="/irchelp/clients/windows">All Windows Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">MacOS X</li>
                  <li><a href="/irchelp/clients/mac/textual.html">Textual</a></li>
                  <li><a href="/irchelp/clients/mac/colloquy.html">Colloquy</a></li>
                  <li><a href="/irchelp/clients/mac/snak.html">Snak</a></li>
                  <li><a href="/irchelp/clients/mac">All MacOS X Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Linux/Unix Terminal</li>
                  <li><a href="/irchelp/clients/unix/irssi">irssi</a></li>
                  <li><a href="/irchelp/clients/unix/epic.html">EPIC</a></li>
                  <li><a href="/irchelp/clients/unix/ircii">ircII</a></li>
                  <li><a href="/irchelp/clients/unix/index.html#terminal">All Linux/Unix Terminal Clients</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Linux/Unix Graphical</li>
                  <li><a href="/irchelp/clients/unix/xchat.html">XChat</a></li>
                  <li><a href="/irchelp/clients/unix/konversation.html">Konversation</a></li>
                  <li><a href="/irchelp/clients/unix/index.html#gui">All Linux/Unix Graphical Clients</a></li>
                  <li class="nav-header">Smartphones</li>
                  <li><a href="/irchelp/clients/mobile/android">Clients for Android</a></li>
                  <li><a href="/irchelp/clients/mobile/ios">Clients for iOS</a></li>
                  <li><a href="/irchelp/clients/mobile">All Smartphone Clients</a></li>
                  <li class="nav-header">Other OS and Crossplatform</li>
                  <li><a href="/irchelp/clients/cross/java">Clients writting in Java</a></li>
                  <li><a href="/irchelp/clients/cross">Other Crossplatform Clients</a></li>
                  <li><a href="/irchelp/clients/otheros">Clients for other Operating Systems</a></li>
                  <li><a href="/irchelp/clients/webclients.html">Web-based clients</a></li>

                </ul>
              </li>
              <li class="dropdown"> <a href="/irchelp/networks" class="dropdown-toggle"
                  data-toggle="dropdown">Networks </a>
                <ul class="dropdown-menu">
                  <li><a href="/irchelp/networks/popular.html">Major Networks</a></li>
                  <li><a href="/irchelp/networks/regional.html">Regional Networks</a></li>
                  <li><a href="/irchelp/networks/topical.html">Topical Networks</a></li>
                  <li><a href="/irchelp/networks">All Networks</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Major Networks</li>
                  <li><a href="/irchelp/networks/efnet/">EFNet</a></li>
                  <li><a href="/irchelp/networks/ircnet.html">IRCnet</a></li>
                  <li><a href="/irchelp/networks/undernet.html">Undernet</a></li>
                  <li><a href="/irchelp/networks/dalnet.html">Dalnet</a></li>
                  <li><a href="/irchelp/networks/quakenet.html">Quakenet</a></li>
                  <li><a href="/irchelp/networks/freenode.html">Freenode</a></li>
                </ul>
              </li>
              <li class="dropdown"> <a href="/irchelp/security" class="dropdown-toggle"
                  data-toggle="dropdown">Security </a>
                <ul class="dropdown-menu">
                  <li><a href="/irchelp/security">General Security</a></li>
                  <li><a href="/irchelp/security/privacy.html">Privacy</a></li>
                  <li><a href="/irchelp/security/nuke.html">Denial of Service</a></li>
                  <li><a href="/irchelp/security/trojan.html">Trojan Horses and Other Malware</a></li>
                  <li><a href="/irchelp/security/socialeng.html">Social Engineering</a></li>
                </ul>
              </li>
              <li class="dropdown"> <a href="/irchelp/ircd" class="dropdown-toggle"
                  data-toggle="dropdown">Servers </a>
                <ul class="dropdown-menu">
                  <li><a href="/irchelp/ircd">General ircd information</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">EFNet IRCDs</li>
                  <li><a href="/irchelp/ircd/ratbox">ircd-ratbox</a></li>
                  <li><a href="/irchelp/ircd/hybrid">ircd-hybrid</a></li>
                </ul>
              </li>
              <li class="dropdown"> <a href="#" class="dropdown-toggle"
                  data-toggle="dropdown">FAQs </a>
                <ul class="dropdown-menu">
                  <li><a href="/irchelp/new2irc.html">New user introduction</a></li>
<!--
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
-->
                </ul>
              </li>
              <li class="dropdown"> <a href="/irchelp/library.html" class="dropdown-toggle"
                  data-toggle="dropdown">Library </a>
                <ul class="dropdown-menu">
                  <li><a href="/irchelp/library.html">Index</a></li>
<!--
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
-->
                </ul>
              </li>
            </ul>
            <form class="navbar-form pull-right"> <input class="span2"
                placeholder="Search" type="text"> <button type="submit"
                class="btn">Search</button> </form>
          </div>
          <!--/.nav-collapse --> </div>
      </div>
    </div>
<!--end of navigation-->

    <div id="container" class="container">
<!--
                        <h1><a href="/">Untitled Page</a></h1>
            -->        
        
            <div class="content">
                                <h1>A description of the DCC protocol</h1>

<p>By Troy Rollo (troy@plod.cbme.unsw.oz.au)</p>

<p><strong>Ed. note:</strong> Most people should probably skip this file and instead see the <a href="/irchelp/rfc/ctcpspec.html">CTCP specification</a> which updates and includes this file in its entirety and talks about other related stuff. I kept this file mostly for historical reasons only. -Jolo</p>

<hr />

<pre><code>    (In response for requests for the protocol to be
     documented).

    The first comment I should make is that the DCC protocol
was never designed to be portable to clients other than IRCII.
As such I take no responsibility for it being difficult to
implement for other clients.


        Why DCC?
        ========

    DCC allows the user to overcome some limitations
of the IRC server network and to have the ultimate in secure
chat connections while still in an IRC oriented protocol.

    DCC uses direct TCP connections between the clients
taking part to carry data. There is no flood control, so
packets can be sent at full speed, and there is no
dependance on server links (or load imposed on them). In
addition, since only the initial handshake for DCC conections
is passed through the IRC network, it is impossible for
Operators with cracked servers to spy on DCC messages.

        How?
        ====

    The initial socket for a DCC connection is created
by the side that initiates (Offers) the connection. This socket
should be a TCP socket bound to INADDR_ANY, listening for
connections.
    The Initiating client, on creating the socket, should
send its details to the target client using the CTCP command
DCC. This command takes the form:

    DCC type argument address port

type    - The connection type
argument - The connectin type dependant argument
address - the host address of the initiator as an integer.
port    - the port or the socket on which the initiator expects
      to receive the connection.

The address and port should be sent as ascii representations of the
decimal integer formed by converting the values to host byte order
and treating them as an unsigned long and unsigned short respectively.


    The following DCC connection types are known to IRCII:

Type    Purpose             Argument
CHAT    To carry a secure conversation  the string "chat"
SEND    To send a file to the recipient the file name

In addition, the following are included in the IRCII DCC command,
although they do not transmit a DCC request via IRC:

TALK    Establishes a TALK connection


        Implementation
        ==============

    The CHAT and SEND connection types should not be
accepted automatically as this would create the potential for
terrorism. Instead, they should notify the user that an
offer has been made, and allow the user to accept it.

    The recipient should have the opportunity to rename
a file send with the DCC SEND command prior to retrieving
it.

    The following are the steps which should occur in
the clients:

Initiator:
    DCC command issued.
    Create a socket, bind it to INADDR_ANY, port 0, and
        make it passive (a listening socket).
    Send the recipient a DCC request via CTCP supplying
        the address and port of the socket. (This
        is ideally taken from the address of the local
        side of the socket which is connected to a
        server. This is presumably the interface on
        the host which is closest to the rest of
        the net, and results in one less routing hop
        in the case of gateway nodes).
    Continue normally until a connection is received.

    On a connection:
    Accept the connection.
    Close the original passive socket.
    Conduct transaction on the new socket.

Acceptor:
    CTCP DCC request received.
    Record information on the DCC request and notify the user.

    At this point, the USER should be able to abort (close) the
    request, or accept it. The request should be accepted with
    a command specifying the sender, type, and argument, or
    a subset of these where no ambiguity exists.

    If accepted, create a TCP socket.
    Connect the new socket to the address and port supplied.
    Conduct the transaction over the socket.


        Type specific details.
        ======================

CHAT    Data sent across a CHAT connection should be sent line-by-line
    without any prefixes or commands. A CHAT connection ends when
    one party issues the DCC CLOSE command to their clients, which
    causes the socket to be closed and the information on the connection
    to be discarded.

FILE    Data is sent in packets, rather than dumped in a stream manner.
    This allows the DCC SEND connection to survive where an FTP
    connection might fail. The size of the packets is up to the
    client, and may be set by the user. Smaller packets result
    in a higher probability of survival over bad links.
    The recipient should acknowledge each packet by transmitting
    the total number of bytes received as an unsigned, 4 byte
    integer in network byte order. The sender should not continue
    to transmit until the recipient has acknowledged all data
    already transmitted. Additionally, the sender should not
    close the connection until the last byte has been
    acknowledged by the recipient.

    Note that it is not possible for the recipient to tell if the
    entire file has been received - only the sender has that
    information, although IRCII does not report it. Users generally
    verify the transfer by checking file sizes.

    Note also that no provision is made for text translation.

    The block size used by IRCII is BIG_BUFFER_SIZE (1024).
    This should probably be reviewed and reduced.


--
_______________________________________________________________________________
troy@cbme.unsw.EDU.AU         Overworked, overcommited and always multitasking.
Opinions expressed are not those of the CBME or UNSW, but are my opinions only.
You are free to adopt them.   I suggest you adopt them.    You will adopt them!
</code></pre>

<hr />

<p>[ <a href="/irchelp/">go back</a> | <a href="/irchelp/search_engine.cgi">search</a> |
<a href="/irchelp/help.html">help</a> | <a href="/irchelp/mail.cgi">send email</a> ]</p>

<p><a href="/irchelp/credit.html">all pages (C) IRCHELP.ORG or original authors</a></p>

                            </div>
        
        <footer>

                        <p>All documents &copy; irchelp.org or original authors 2013 <br />Baked with <em><a href="http://bolt80.com/piecrust/">PieCrust</a> 1.3.0-dev</em>.</p>
                    </footer>
    </div>
    
        <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/js/jquery.js"></script>
    <script src="/js/bootstrap-transition.js"></script>
    <script src="/js/bootstrap-alert.js"></script>
    <script src="/js/bootstrap-modal.js"></script>
    <script src="/js/bootstrap-dropdown.js"></script>
    <script src="/js/bootstrap-scrollspy.js"></script>
    <script src="/js/bootstrap-tab.js"></script>
    <script src="/js/bootstrap-tooltip.js"></script>
    <script src="/js/bootstrap-popover.js"></script>
    <script src="/js/bootstrap-button.js"></script>
    <script src="/js/bootstrap-collapse.js"></script>
    <script src="/js/bootstrap-carousel.js"></script>
    <script src="/js/bootstrap-typeahead.js"></script>
</body>
</html>
